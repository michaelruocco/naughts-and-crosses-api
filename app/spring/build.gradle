buildscript {
    ext {
        springBootVersion = "3.1.5"
    }
}

plugins {
    id "naughts-and-crosses-api.java-conventions"
    id "org.springframework.boot" version "${springBootVersion}"
    id "com.gorylenko.gradle-git-properties" version "2.4.1"
}

ext['junit-jupiter.version'] = "${junitVersion}"

configurations {
    integrationTestRuntimeOnly.exclude module: "slf4j-simple"
}

dependencies {
    implementation project(":api")
    implementation project(":repository")
    implementation project(":use-cases")
    implementation project(":entities")
    implementation project(":rest-client") // not required by code but added as not appearing in test coverage
    implementation platform("org.springframework.boot:spring-boot-dependencies:${springBootVersion}")
    implementation "org.springframework.boot:spring-boot-starter-web"
    implementation "org.springframework.boot:spring-boot-starter-actuator"
    implementation "org.springframework.boot:spring-boot-starter-websocket"

    integrationTestImplementation testFixtures(project(":api"))
    integrationTestImplementation project(":rest-client")
    integrationTestImplementation "net.javacrumbs.json-unit:json-unit-assertj:3.2.2"

    testFixturesImplementation project(":rest-client")
    testFixturesImplementation "org.springframework.boot:spring-boot:${springBootVersion}"
    testFixturesImplementation "org.awaitility:awaitility:4.2.0"
}

apply from: rootProject.file("publish.gradle")